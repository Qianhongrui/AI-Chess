var Board=function(){this.whitePieces=[];this.blackPieces=[];this.score=0;this.setupPieces()};
Board.prototype.setupPieces=function(){for(var a=0;16>a;a++){var c=int(a%4),b=int(a/4);"A"==input.value().charAt(a)?this.whitePieces.push(new King(c,b,!0)):"B"==input.value().charAt(a)?this.whitePieces.push(new Rook(c,b,!0)):"C"==input.value().charAt(a)?this.whitePieces.push(new Pawn(c,b,!0)):"X"==input.value().charAt(a)?this.blackPieces.push(new King(c,b,!1)):"Y"==input.value().charAt(a)?this.blackPieces.push(new Rook(c,b,!1)):"Z"==input.value().charAt(a)&&this.blackPieces.push(new Pawn(c,b,!1))}};
Board.prototype.show=function(){for(var a=0;a<this.whitePieces.length;a++)this.whitePieces[a].show();for(a=0;a<this.blackPieces.length;a++)this.blackPieces[a].show()};
Board.prototype.isPieceAt=function(a,c){for(var b=0;b<this.whitePieces.length;b++)if(!this.whitePieces[b].taken&&this.whitePieces[b].matrixPosition.x==a&&this.whitePieces[b].matrixPosition.y==c)return!0;for(b=0;b<this.blackPieces.length;b++)if(!this.blackPieces[b].taken&&this.blackPieces[b].matrixPosition.x==a&&this.blackPieces[b].matrixPosition.y==c)return!0;return!1};
Board.prototype.getPieceAt=function(a,c){for(var b=0;b<this.whitePieces.length;b++)if(!this.whitePieces[b].taken&&this.whitePieces[b].matrixPosition.x==a&&this.whitePieces[b].matrixPosition.y==c)return this.whitePieces[b];for(b=0;b<this.blackPieces.length;b++)if(!this.blackPieces[b].taken&&this.blackPieces[b].matrixPosition.x==a&&this.blackPieces[b].matrixPosition.y==c)return this.blackPieces[b];return null};
Board.prototype.generateNewBoardsWhitesTurn=function(){for(var a=[],c=0;c<this.whitePieces.length;c++)if(!this.whitePieces[c].taken)for(var b=this.whitePieces[c].generateNewBoards(this),d=0;d<b.length;d++)a.push(b[d]);return a};Board.prototype.generateNewBoardsBlacksTurn=function(){for(var a=[],c=0;c<this.blackPieces.length;c++)if(!this.blackPieces[c].taken)for(var b=this.blackPieces[c].generateNewBoards(this),d=0;d<b.length;d++)a.push(b[d]);return a};
Board.prototype.setScore=function(){for(var a=this.score=0;a<this.whitePieces.length;a++)this.whitePieces[a].taken||(this.score-=this.whitePieces[a].value);for(a=0;a<this.blackPieces.length;a++)this.blackPieces[a].taken||(this.score+=this.blackPieces[a].value)};Board.prototype.move=function(a,c){var b=this.getPieceAt(a.x,a.y);null==b?print("shit"):b.move(c.x,c.y,this)};
Board.prototype.clone=function(){for(var a=new Board,c=0;c<this.whitePieces.length;c++)a.whitePieces[c]=this.whitePieces[c].clone();for(c=0;c<this.blackPieces.length;c++)a.blackPieces[c]=this.blackPieces[c].clone();return a};Board.prototype.isDone=function(){return 0==this.whitePieces.length||0==this.blackPieces.length?ture:!1};Board.prototype.isDead=function(){return whiteAI&&whitesMove&&0==this.whitePieces.length||blackAI&&!whitesMove&&0==this.blackPieces.length?ture:!1};
Board.prototype.hasWon=function(){return whiteAI&&whitesMove&&0==this.blackPieces.length||blackAI&&!whitesMove&&0==this.whitePieces.length?ture:!1};