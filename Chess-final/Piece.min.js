var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(c){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var c=$jscomp.setPrototypeOf;c(a,b)}else for(c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.superClass_=b.prototype};
var Piece=function(a,b,c,d,f){this.matrixPosition=createVector(a,b);this.pixelPosition=createVector(a*tileSize+tileSize/2,b*tileSize+tileSize/2);this.taken=!1;this.white=c;this.letter=d;this.pic=f;this.movingThisPiece=!1;this.value=0};Piece.prototype.show=function(){this.taken||(imageMode(CENTER),this.movingThisPiece?image(this.pic,mouseX,mouseY,1.5*tileSize,1.5*tileSize):image(this.pic,this.pixelPosition.x,this.pixelPosition.y,tileSize,tileSize))};
Piece.prototype.generateNewBoards=function(a){for(var b=[],c=this.generateMoves(a),d=0;d<c.length;d++)b[d]=a.clone(),b[d].move(this.matrixPosition,c[d]);return b};Piece.prototype.withinBounds=function(a,b){return 0<=a&&0<=b&&4>a&&4>b?!0:!1};Piece.prototype.move=function(a,b,c){c=c.getPieceAt(a,b);null!=c&&(c.taken=!0);this.matrixPosition=createVector(a,b);this.pixelPosition=createVector(a*tileSize+tileSize/2,b*tileSize+tileSize/2)};
Piece.prototype.attackingAllies=function(a,b,c){a=c.getPieceAt(a,b);return null!=a&&("K"==this.letter&&"P"==a.letter||"R"==this.letter&&"K"==a.letter||"P"==this.letter&&"R"==a.letter||a.white==this.white)?!0:!1};Piece.prototype.canMove=function(a,b,c){return this.withinBounds(a,b)?!0:!1};
Piece.prototype.moveThroughPieces=function(a,b,c){var d=a-this.matrixPosition.x;0<d?d=1:0>d&&(d=-1);var f=b-this.matrixPosition.y;0<f?f=1:0>f&&(f=-1);var e=createVector(this.matrixPosition.x,this.matrixPosition.y);e.x+=d;for(e.y+=f;e.x!=a||e.y!=b;){if(null!=c.getPieceAt(e.x,e.y))return!0;e.x+=d;e.y+=f}return!1};var King=function(a,b,c){Piece.call(this,a,b,c);this.letter="K";this.pic=c?images[0]:images[3];this.value=1};$jscomp.inherits(King,Piece);
King.prototype.clone=function(){var a=new King(this.matrixPosition.x,this.matrixPosition.y,this.white);a.taken=this.taken;return a};King.prototype.canMove=function(a,b,c){return null!=c.getPieceAt(a,b)&&"P"==c.getPieceAt(a,b).letter||!this.withinBounds(a,b)||this.attackingAllies(a,b,c)?!1:1==abs(a-this.matrixPosition.x)&&b==this.matrixPosition.y||1==abs(b-this.matrixPosition.y)&&a==this.matrixPosition.x?this.moveThroughPieces(a,b,c)?!1:!0:!1};
King.prototype.generateMoves=function(a){for(var b=[],c=-1;2>c;c++)for(var d=-1;2>d;d++)if(1==abs(c+d)){var f=this.matrixPosition.x+c,e=this.matrixPosition.y+d;!this.withinBounds(f,e)||0==c&&0==d||this.attackingAllies(f,e,a)||b.push(createVector(f,e))}return b};var Rook=function(a,b,c){Piece.call(this,a,b,c);this.letter="R";this.pic=c?images[1]:images[4];this.value=1};$jscomp.inherits(Rook,Piece);
Rook.prototype.canMove=function(a,b,c){return null!=c.getPieceAt(a,b)&&"K"==c.getPieceAt(a,b).letter||!this.withinBounds(a,b)||this.attackingAllies(a,b,c)?!1:1==abs(a-this.matrixPosition.x)&&b==this.matrixPosition.y||1==abs(b-this.matrixPosition.y)&&a==this.matrixPosition.x?this.moveThroughPieces(a,b,c)?!1:!0:!1};
Rook.prototype.generateMoves=function(a){for(var b=[],c=-1;2>c;c++)for(var d=-1;2>d;d++)if(1==abs(c+d)){var f=this.matrixPosition.x+c,e=this.matrixPosition.y+d;!this.withinBounds(f,e)||0==c&&0==d||this.attackingAllies(f,e,a)||b.push(createVector(f,e))}return b};Rook.prototype.clone=function(){var a=new Rook(this.matrixPosition.x,this.matrixPosition.y,this.white);a.taken=this.taken;return a};
var Pawn=function(a,b,c){Piece.call(this,a,b,c);this.letter="P";this.firstTurn=!0;this.pic=c?images[2]:images[5];this.value=1};$jscomp.inherits(Pawn,Piece);Pawn.prototype.canMove=function(a,b,c){return null!=c.getPieceAt(a,b)&&"R"==c.getPieceAt(a,b).letter||!this.withinBounds(a,b)||this.attackingAllies(a,b,c)?!1:1==abs(a-this.matrixPosition.x)&&b==this.matrixPosition.y||1==abs(b-this.matrixPosition.y)&&a==this.matrixPosition.x?this.moveThroughPieces(a,b,c)?!1:!0:!1};
Pawn.prototype.generateMoves=function(a){for(var b=[],c=-1;2>c;c++)for(var d=-1;2>d;d++)if(1==abs(c+d)){var f=this.matrixPosition.x+c,e=this.matrixPosition.y+d;!this.withinBounds(f,e)||0==c&&0==d||this.attackingAllies(f,e,a)||b.push(createVector(f,e))}return b};Pawn.prototype.clone=function(){var a=new Pawn(this.matrixPosition.x,this.matrixPosition.y,this.white);a.taken=this.taken;return a};